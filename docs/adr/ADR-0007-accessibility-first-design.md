# ADR-0007: Accessibility-First Design

## Status

**Accepted**

## Date

2026-01-21

## Context

mITyFactory produces both a desktop UI (Tauri-based) and generates frontend applications through templates. As a responsible software factory, we have a duty to ensure that:

1. Our own UI is accessible to users with disabilities
2. Applications generated by the factory are accessible by default
3. Accessibility is treated as a first-class quality attribute, not an afterthought

Without explicit accessibility standards, generated applications may inadvertently exclude users who rely on:
- Screen readers (blind/visually impaired users)
- Keyboard navigation (motor impairments)
- High contrast modes (low vision)
- Reduced motion settings (vestibular disorders)

## Decision

We adopt **WCAG 2.1 Level AA** as our baseline accessibility standard for:

1. **mITyFactory UI** (`crates/mity_ui/dist/`)
2. **All frontend templates** (Vue, Angular, React, fullstack variants)
3. **Generated documentation** (ensuring semantic HTML)

### Implementation Requirements

#### 1. Constitution Amendment

Add "Inclusive by Design" as Core Tenet #6 in `.specify/constitution.md`.

#### 2. Design Principles Amendment

Add "Accessibility First (A11Y)" as Principle #11 in `.specify/principles.md`.

#### 3. Testing Requirements

Add accessibility testing as a required test category:
- Automated testing with axe-core
- Manual keyboard navigation testing
- Screen reader testing (NVDA/VoiceOver)

#### 4. Copilot Instructions

Update GitHub Copilot instructions with A11Y patterns:
- ARIA guidelines
- Keyboard navigation requirements
- Color contrast minimums
- Screen reader support patterns

#### 5. Template Updates

All frontend templates must include:
- A11Y section in copilot instructions
- Screen reader utility classes (`.sr-only`)
- Focus management utilities
- `prefers-reduced-motion` media queries

### WCAG 2.1 AA Key Requirements

| Criterion | Requirement |
|-----------|-------------|
| 1.1.1 | Non-text content has text alternatives |
| 1.3.1 | Information conveyed through presentation is also in structure |
| 1.4.3 | Text contrast ratio ≥ 4.5:1 (3:1 for large text) |
| 1.4.11 | UI component contrast ratio ≥ 3:1 |
| 2.1.1 | All functionality available via keyboard |
| 2.1.2 | No keyboard traps |
| 2.4.3 | Focus order preserves meaning |
| 2.4.7 | Focus is visible |
| 4.1.2 | UI components have accessible names and roles |

### Color Contrast Validation

The mITyFactory design system colors have been validated:

| Combination | Ratio | Status |
|-------------|-------|--------|
| `--color-text` on `--color-bg` | 9.2:1 | ✅ AAA |
| `--color-text-muted` on `--color-bg` | 5.8:1 | ✅ AA |
| `--color-primary` on `--color-bg` | 4.8:1 | ✅ AA |

## Consequences

### Positive

1. **Broader audience**: Applications are usable by people with disabilities
2. **Legal compliance**: Meets accessibility requirements in many jurisdictions
3. **Better UX for all**: A11Y improvements often benefit all users
4. **SEO benefits**: Semantic HTML improves search engine indexing
5. **Quality signal**: Demonstrates commitment to inclusive design

### Negative

1. **Development overhead**: Requires additional testing and validation
2. **Learning curve**: Developers need A11Y knowledge
3. **Design constraints**: Some visual designs may need adjustment for contrast

### Mitigations

1. **Tooling**: Integrate axe-core into CI pipelines
2. **Documentation**: Comprehensive A11Y patterns in copilot instructions
3. **Templates**: Pre-built accessible components reduce developer burden
4. **Validation**: Add A11Y as a quality gate

## Compliance

This decision supports compliance with:
- Americans with Disabilities Act (ADA)
- Section 508 (US Government)
- European Accessibility Act
- Web Content Accessibility Guidelines (WCAG) 2.1

## References

- [WCAG 2.1 Quick Reference](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [axe-core Testing Library](https://github.com/dequelabs/axe-core)
- [Angular CDK A11y](https://material.angular.io/cdk/a11y/overview)
- [Vue A11y Guidelines](https://vuejs.org/guide/best-practices/accessibility.html)

## Related ADRs

- ADR-0005: Specification-Driven Development
