# GitHub Copilot Instructions for {{app_name}}

## Project Overview

{{app_name}} is a Java Quarkus application generated by mITyFactory.

## Tech Stack

- **Backend**: Java 21
- **Framework**: Quarkus (Supersonic Subatomic Java)
- **Build**: Maven
- **Testing**: JUnit 5, REST Assured
- **Native**: GraalVM native compilation supported

## Project Structure

```
{{app_name}}/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/example/
│   │   │       ├── resource/        # REST endpoints
│   │   │       ├── service/         # Business logic
│   │   │       ├── repository/      # Data access (Panache)
│   │   │       └── model/           # Entity classes
│   │   └── resources/
│   │       └── application.properties
│   └── test/
│       └── java/                    # Test classes
├── docs/
│   └── architecture/               # Architecture documentation
├── .specify/                       # Spec Kit
└── .github/                        # GitHub configuration
```

---

## Code Style Rules

### Quarkus Patterns

```java
// Resource (Controller)
@Path("/api/v1/items")
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public class ItemResource {
    @Inject
    ItemService itemService;

    @GET
    @Path("/{id}")
    public Item getItem(@PathParam("id") Long id) {
        return itemService.findById(id);
    }
}

// Panache Repository
@ApplicationScoped
public class ItemRepository implements PanacheRepository<Item> {
    public Item findByName(String name) {
        return find("name", name).firstResult();
    }
}
```

---

## Testing Requirements

### Unit Tests
- Test all service classes
- Use `@QuarkusTest` for CDI tests
- Target 80%+ coverage

### Integration Tests
- Use REST Assured for endpoint testing
- Use `@QuarkusIntegrationTest` for native tests

```java
@QuarkusTest
class ItemResourceTest {
    @Test
    void getItem_ReturnsItem() {
        given()
            .when().get("/api/v1/items/1")
            .then()
            .statusCode(200)
            .body("name", is("expected"));
    }
}
```

---

## Factory Alignment

This application follows mITyFactory principles:

1. **Spec-driven**: All features defined in `.specify/features/`
2. **Container-first**: Runs in Docker containers (native supported)
3. **Deterministic**: Reproducible builds
4. **Quality gates**: Tests, lints, and security checks

---

## DO ✓

- Use CDI for dependency injection
- Write tests for new features
- Follow the spec in `.specify/`
- Use `application.properties` for configuration
- Consider native compilation for production

## DON'T ✗

- Use field injection without `@Inject`
- Hardcode configuration values
- Commit secrets to the repository
- Skip input validation
- Block the event loop (use reactive where possible)
