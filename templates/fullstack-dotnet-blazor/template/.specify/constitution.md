# {{app_name}} Constitution

## üèõÔ∏è Project Rules

This constitution defines the rules governing {{app_name}} development.

---

## Article I: Alignment with Factory

This application adheres to mITyFactory principles.

1. **Spec-driven**: All features begin with specifications.
2. **Container-first**: Docker Compose for development, Helm for production.
3. **Deterministic**: Operations produce consistent results.

---

## Article II: Architecture

The solution follows Clean Architecture principles.

1. **Domain Layer**: Core business logic with no external dependencies.
2. **Application Layer**: Use cases, services, and DTOs.
3. **Infrastructure Layer**: EF Core, MassTransit, and external services.
4. **Presentation**: Blazor Web App and REST API.

### Project Dependencies

```
Web/Api ‚Üí Application ‚Üí Domain
          ‚Üì
    Infrastructure
```

---

## Article III: Code Quality

All code MUST meet quality standards.

1. **Testing**: Unit tests 80%+ coverage, integration tests for critical paths.
2. **Central Packages**: All package versions in Directory.Packages.props.
3. **Formatting**: Code must pass `dotnet format --verify-no-changes`.
4. **Analyzers**: All warnings treated as errors.
5. **Review**: All changes require peer review.

---

## Article IV: Security

Security is a primary concern.

1. **Authentication**: All API endpoints require authentication in production.
2. **Authorization**: Least-privilege access via policies.
3. **Secrets**: Use User Secrets locally, Key Vault in production.
4. **Dependencies**: Regular NuGet audit for vulnerabilities.
5. **HTTPS**: Enforce HTTPS in production.

---

## Article V: Messaging

MassTransit governs async communication.

1. **Events**: Use events for decoupled communication.
2. **Idempotency**: Consumers must be idempotent.
3. **Retries**: Configure appropriate retry policies.
4. **Dead Letter**: Handle failed messages appropriately.

---

## Article VI: Observability

Full observability is required.

1. **Logging**: Structured logging with Serilog.
2. **Tracing**: Distributed tracing with OpenTelemetry.
3. **Metrics**: Prometheus-compatible metrics exposed.
4. **Health Checks**: Liveness and readiness probes required.

---

## Article VII: Operations

Production operations follow defined processes.

1. **Containers**: All services containerized.
2. **Kubernetes**: Deploy via Helm charts.
3. **Migrations**: EF Core migrations for schema changes.
4. **Configuration**: Environment-based configuration.

---

*This constitution governs {{app_name}} development. Generated by mITyFactory.*
