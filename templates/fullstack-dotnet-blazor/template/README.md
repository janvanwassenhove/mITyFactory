# {{project_name}}

A modern .NET 10 fullstack application with **Blazor Web App** frontend and **REST API** backend.

## ğŸš€ Tech Stack

### Core
- **.NET 10** with C# 13
- **Blazor Web App** - SSR + Interactive Server rendering
- **ASP.NET Core Minimal APIs** - Lightweight API endpoints
- **Entity Framework Core** - PostgreSQL provider

### Messaging & Observability
- **MassTransit** - Message bus with RabbitMQ
- **OpenTelemetry** - Distributed tracing & metrics
- **Serilog** - Structured logging

### Testing
- **xUnit** - Test framework
- **Testcontainers** - Integration tests with real dependencies
- **FluentAssertions** - Expressive assertions
- **NSubstitute** - Mocking framework

### Infrastructure
- **Docker Compose** - Local development
- **Helm Charts** - Kubernetes deployment
- **Central Package Management** - Directory.Packages.props

## ğŸ“ Project Structure

```
{{project_name}}/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ {{project_name}}.Web/           # Blazor Web App (port 5000)
â”‚   â”œâ”€â”€ {{project_name}}.Api/           # REST API (port 5001)
â”‚   â”œâ”€â”€ {{project_name}}.Application/   # Business logic & services
â”‚   â”œâ”€â”€ {{project_name}}.Domain/        # Entities & repository interfaces
â”‚   â”œâ”€â”€ {{project_name}}.Infrastructure/# EF Core, repository implementations
â”‚   â””â”€â”€ {{project_name}}.Shared/        # DTOs & shared models
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ {{project_name}}.Tests.Unit/
â”‚   â””â”€â”€ {{project_name}}.Tests.Integration/
â”œâ”€â”€ deploy/
â”‚   â””â”€â”€ helm/                           # Kubernetes Helm charts
â”œâ”€â”€ Directory.Build.props               # Central build properties
â”œâ”€â”€ Directory.Packages.props            # Central package versions
â”œâ”€â”€ docker-compose.yml                  # Local development stack
â””â”€â”€ {{project_name}}.sln
```

## ğŸƒ Quick Start

### Prerequisites

- .NET 10 SDK
- Docker Desktop
- (Optional) kubectl & Helm for K8s deployment

### Local Development

1. **Start infrastructure** (PostgreSQL, RabbitMQ, Seq, Jaeger):

```bash
docker-compose up -d db rabbitmq seq jaeger
```

2. **Run the API**:

```bash
cd src/{{project_name}}.Api
dotnet run
```

3. **Run the Web App** (in another terminal):

```bash
cd src/{{project_name}}.Web
dotnet run
```

4. **Access the application**:
   - Web App: http://localhost:5000
   - API: http://localhost:5001
   - API Docs: http://localhost:5001/scalar/v1
   - RabbitMQ: http://localhost:15672 (guest/guest)
   - Seq Logs: http://localhost:5341
   - Jaeger Traces: http://localhost:16686

### Full Docker Compose

Run everything in containers:

```bash
docker-compose up --build
```

## ğŸ§ª Testing

### Unit Tests

```bash
dotnet test tests/{{project_name}}.Tests.Unit
```

### Integration Tests

Integration tests use Testcontainers (requires Docker):

```bash
dotnet test tests/{{project_name}}.Tests.Integration
```

### Coverage Report

```bash
dotnet test --collect:"XPlat Code Coverage"
reportgenerator -reports:**/coverage.cobertura.xml -targetdir:coverage -reporttypes:Html
```

## ğŸ—„ï¸ Database Migrations

### Add Migration

```bash
dotnet ef migrations add MigrationName --project src/{{project_name}}.Infrastructure --startup-project src/{{project_name}}.Api
```

### Update Database

```bash
dotnet ef database update --project src/{{project_name}}.Infrastructure --startup-project src/{{project_name}}.Api
```

## ğŸš¢ Deployment

### Kubernetes with Helm

```bash
# Install
helm install {{project_name}} ./deploy/helm -f ./deploy/helm/values.yaml

# Upgrade
helm upgrade {{project_name}} ./deploy/helm -f ./deploy/helm/values.yaml
```

## ğŸ“– API Documentation

API documentation available via Scalar at `/scalar/v1` when running in Development mode.

### Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /api/v1/items | List all items |
| GET | /api/v1/items/{id} | Get item by ID |
| POST | /api/v1/items | Create new item |
| PUT | /api/v1/items/{id} | Update item |
| DELETE | /api/v1/items/{id} | Delete item |
| GET | /health | Health check (detailed) |
| GET | /health/live | Liveness probe |
| GET | /health/ready | Readiness probe |
| GET | /metrics | Prometheus metrics |

## ğŸ”§ Configuration

Configuration via environment variables or `appsettings.json`:

| Variable | Description | Default |
|----------|-------------|---------|
| `ConnectionStrings__Database` | PostgreSQL connection | localhost |
| `ConnectionStrings__RabbitMq` | RabbitMQ connection | localhost |
| `Api__BaseUrl` | API URL for Web App | http://localhost:5001 |

---

*Generated by mITyFactory*
