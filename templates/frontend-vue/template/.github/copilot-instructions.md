# GitHub Copilot Instructions for {{app_name}}

## Project Overview

{{app_name}} is a Vue.js SPA generated by mITyFactory.

## Tech Stack

- **Frontend**: Vue 3 with Composition API
- **Language**: TypeScript
- **Build**: Vite
- **Testing**: Vitest, Vue Test Utils
- **Styling**: CSS/SCSS

## Project Structure

```
{{app_name}}/
├── src/
│   ├── main.ts                     # Application entry
│   ├── App.vue                     # Root component
│   ├── components/                 # Reusable components
│   ├── views/                      # Page components
│   ├── composables/                # Composition functions
│   ├── stores/                     # Pinia stores
│   ├── services/                   # API services
│   ├── types/                      # TypeScript types
│   └── assets/                     # Static assets
├── tests/
│   ├── unit/                       # Unit tests
│   └── e2e/                        # End-to-end tests
├── .specify/                       # Spec Kit
└── .github/                        # GitHub configuration
```

---

## Code Style Rules

### Vue Composition API

```vue
<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useItemStore } from '@/stores/items'

const store = useItemStore()
const searchQuery = ref('')

const filteredItems = computed(() =>
  store.items.filter(item => 
    item.name.includes(searchQuery.value)
  )
)

onMounted(() => {
  store.fetchItems()
})
</script>
```

---

## Accessibility (A11Y) Requirements

**CRITICAL**: Target WCAG 2.1 AA compliance.

### Vue Component A11Y Patterns

```vue
<template>
  <!-- Use semantic HTML -->
  <main role="main">
    <h1>{{ pageTitle }}</h1>
    
    <!-- Keyboard accessible buttons -->
    <button 
      @click="handleClick"
      @keydown.enter="handleClick"
      aria-label="Submit form"
    >
      Submit
    </button>
    
    <!-- Form accessibility -->
    <label for="email">Email</label>
    <input 
      id="email" 
      v-model="email"
      type="email"
      aria-describedby="email-error"
      :aria-invalid="!!emailError"
    >
    <span id="email-error" role="alert" v-if="emailError">
      {{ emailError }}
    </span>
    
    <!-- Live regions for dynamic updates -->
    <div aria-live="polite" class="sr-only">
      {{ statusMessage }}
    </div>
  </main>
</template>

<style>
/* Screen reader only class */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}

/* Respect motion preferences */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
</style>
```

### A11Y Checklist

- [ ] All images have `alt` text
- [ ] All form inputs have associated labels
- [ ] Color contrast meets 4.5:1 minimum
- [ ] Focus indicators are visible
- [ ] Keyboard navigation works throughout
- [ ] Screen reader announces dynamic content
- [ ] No keyboard traps in modals

<template>
  <div class="items">
    <input v-model="searchQuery" placeholder="Search..." />
    <ItemCard v-for="item in filteredItems" :key="item.id" :item="item" />
  </div>
</template>
```

### Composables

```typescript
// composables/useApi.ts
export function useApi<T>(url: string) {
  const data = ref<T | null>(null)
  const loading = ref(false)
  const error = ref<Error | null>(null)

  const fetch = async () => {
    loading.value = true
    try {
      const response = await api.get<T>(url)
      data.value = response.data
    } catch (e) {
      error.value = e as Error
    } finally {
      loading.value = false
    }
  }

  return { data, loading, error, fetch }
}
```

---

## Testing Requirements

### Unit Tests
- Test all composables and stores
- Test component behavior with Vue Test Utils
- Target 80%+ coverage

```typescript
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import ItemCard from '@/components/ItemCard.vue'

describe('ItemCard', () => {
  it('renders item name', () => {
    const wrapper = mount(ItemCard, {
      props: { item: { id: 1, name: 'Test Item' } }
    })
    expect(wrapper.text()).toContain('Test Item')
  })
})
```

---

## Factory Alignment

This application follows mITyFactory principles:

1. **Spec-driven**: All features defined in `.specify/features/`
2. **Container-first**: Runs in Docker/nginx containers
3. **Deterministic**: Reproducible builds
4. **Quality gates**: Tests, lints, and type checks

---

## DO ✓

- Use Composition API with `<script setup>`
- Write tests for components and composables
- Follow the spec in `.specify/`
- Use TypeScript for type safety
- Keep components small and focused

## DON'T ✗

- Use Options API for new components
- Mutate props directly
- Commit secrets to the repository
- Skip type definitions
- Use `any` type without justification
