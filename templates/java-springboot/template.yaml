# Java Spring Boot Template
# This template provides an enterprise-ready Java application with Spring Boot

id: java-springboot
name: Java Spring Boot
description: Enterprise-ready Java application with Spring Boot
version: "1.0.0"
author: mITyFactory
category: backend
status: production

# Language/Runtime Configuration
runtime:
  language: java
  version: "21"
  package_manager: maven

# Container Configuration
container:
  image: eclipse-temurin
  tag: "21-jdk"
  build_command:
    - ./mvnw
    - package
    - -DskipTests
  test_command:
    - ./mvnw
    - test
  run_command:
    - java
    - -jar
    - target/app.jar
  ports:
    - 8080
  workdir: /app

# Build/Test/Lint Commands
commands:
  install:
    - ./mvnw dependency:resolve
  build:
    - ./mvnw package -DskipTests
  test:
    - ./mvnw test
  lint:
    - ./mvnw checkstyle:check
  format:
    - ./mvnw spotless:apply
  run:
    - ./mvnw spring-boot:run

# DevContainer Configuration
devcontainer:
  image: mcr.microsoft.com/devcontainers/java:21
  features:
    ghcr.io/devcontainers/features/docker-in-docker:2: {}
    ghcr.io/devcontainers-contrib/features/terraform-asdf:2: {}
  extensions:
    - vscjava.vscode-java-pack
    - vmware.vscode-boot-dev-pack
    - redhat.vscode-yaml
    - hashicorp.terraform
  post_create:
    - ./mvnw dependency:resolve
  ports:
    - 8080

# IaC Support Configuration
iac:
  enabled: true
  providers:
    - provider: terraform
      clouds:
        - aws
        - azure
        - gcp
      base_module: iac/terraform/base
  outputs:
    - name: container_image
      description: Container image name for deployment
      type: string
    - name: container_tag
      description: Container image tag
      type: string
      default: latest
    - name: container_port
      description: Port the application listens on
      type: number
      default: "8080"
    - name: health_check_path
      description: Health check endpoint path
      type: string
      default: /actuator/health

# Template Variables
variables:
  - name: project_name
    description: Name of the project
    required: true
  - name: group_id
    description: Maven group ID
    default: com.example
  - name: java_version
    description: Java version
    default: "21"
  - name: spring_boot_version
    description: Spring Boot version
    default: "3.2.0"

# Files to render with variable substitution
files_to_render:
  - pom.xml
  - README.md
